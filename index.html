<!DOCTYPE html>
<html>
<head>
  <title>Trusted Care Abroad</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    td, th { border: 1px solid #ddd; padding: 12px; }
    input[type="text"] { padding: 8px; width: 300px; }
    label { margin-left: 20px; }
  </style>
</head>
<body>
  <h1>Medical Tourism Platform</h1>
  <input type="text" id="search" placeholder="Search hospitals...">
  <label>
    <input type="checkbox" id="accreditedOnly"> Show only accredited
  </label>

  <table id="hospitals">
    <tr><th>Hospital</th><th>Country</th><th>Specialty</th><th>Price</th><th>Accredited</th></tr>
  </table>

  <script>
    let allHospitals = [];
    fetch('https://raw.githubusercontent.com/John-Caples/medical-tourism-platform/main/hospitals.csv')
      .then(r => r.text())
      .then(d => {
        allHospitals = d.split('\n').slice(1);
        updateTable();
      });

    function updateTable() {
      const search = document.getElementById('search').value.toLowerCase();
      const accreditedOnly = document.getElementById('accreditedOnly').checked;
      const filtered = allHospitals.filter(row => {
        const [n,c,s,a,p] = row.split(',');
        return (n.toLowerCase().includes(search) && (!accreditedOnly || a === 'Yes');
      });
      
      document.getElementById('hospitals').innerHTML = `
        <tr><th>Hospital</th><th>Country</th><th>Specialty</th><th>Price</th><th>Accredited</th></tr>
        ${filtered.map(row => {
          const [n,c,s,a,p] = row.split(',');
          return `<tr>
            <td>${n}</td>
            <td>${c}</td>
            <td>${s}</td>
            <td>$${Number(p).toLocaleString()}</td>
            <td>${a === 'Yes' ? '✅' : '❌'}</td>
          </tr>`;
        }).join('')}
      `;
    }

    document.getElementById('search').addEventListener('input', updateTable);
    document.getElementById('accreditedOnly').addEventListener('change', updateTable);
  </script>
</body>
</html>
